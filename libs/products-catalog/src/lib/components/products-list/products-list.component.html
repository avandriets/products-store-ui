<products-store-ui-page-template *ngIf="{ status: status$ | async, products: products$ | async } as data">

  <ng-container title>
    <h2>Products list</h2>
  </ng-container>

  <ng-container action>

    <div fxLayout="row"
         fxLayoutAlign="end center">
      <a mat-stroked-button color="primary"
         routerLink="./add">
        Create product
      </a>
    </div>

  </ng-container>

  <ng-container body>

    <products-store-ui-state-container [height]="'380px'"
                                       [state]="data.status"
                                       [resolved]="resolved">
      <ng-template #resolved>

        <table mat-table
               matSort
               [dataSource]="data.products"
               (matSortChange)="onSortingClick($event)">

          <ng-container matColumnDef="title">
            <th *matHeaderCellDef
                mat-header-cell
                mat-sort-header>
              Title
            </th>
            <td *matCellDef="let element"
                mat-cell>
              {{element.title}}
            </td>
          </ng-container>

          <ng-container matColumnDef="description">
            <th *matHeaderCellDef
                mat-header-cell
                mat-sort-header>
              Description
            </th>
            <td *matCellDef="let element"
                mat-cell>
              {{element.description}}
            </td>
          </ng-container>

          <tr *matHeaderRowDef="displayedColumns"
              mat-header-row>
          </tr>

          <tr *matRowDef="let row; columns: displayedColumns;"
              mat-row>
          </tr>

        </table>

        <ng-container *ngIf="pagination$ | async as pagination">

          <mat-paginator [pageIndex]="pagination.index"
                         [length]="getTotalCount() | async"
                         [pageSize]="pagination.limit"
                         [pageSizeOptions]="paginationLimits"
                         (page)="pageChangeEvent($event)">
          </mat-paginator>

        </ng-container>

      </ng-template>

    </products-store-ui-state-container>

  </ng-container>

</products-store-ui-page-template>
